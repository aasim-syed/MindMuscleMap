export class Metronome{ac?:AudioContext;timer?:number;constructor(private bpm=60){}setBpm(b:number){this.bpm=b;this.stop();this.start()}start(){if(this.timer)return;const it=60000/this.bpm;this.ac=new AudioContext();this.timer=setInterval(()=>this.tick(),it)}stop(){if(this.timer){clearInterval(this.timer);this.timer=undefined}}tick(){if(!this.ac)return;const o=this.ac.createOscillator(),g=this.ac.createGain();o.type='triangle';o.frequency.value=880;g.gain.value=0.001;o.connect(g);g.connect(this.ac.destination);o.start();setTimeout(()=>o.stop(),80)}}